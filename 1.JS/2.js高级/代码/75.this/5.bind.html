<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="button" value="点击发送验证码">
    <script type="text/javascript">
        // bind:函数.bind(this想指向谁,x,y...)
        //区别：bind不会让函数执行
        // function fn() {
        //     console.log(this);//window
        // }
        // let obj = { uname: 'lisa' }

        // let re = fn.bind(obj)
        // re()
        //或者
        // fn.bind(obj)()

        // -------------------------
        // let btn = document.querySelector('input')
        // btn.addEventListener('click', function () {
        //     this.disabled = true
        //     //开启定时器
        //     let i = 5
        //     btn.value = `重新发送${i} `
        //     let timer = setInterval(function () {
        //         i--
        //         btn.value = `重新发送${i} `
        //         if (i === 0) {
        //             clearInterval(timer)
        //             btn.value = `点击发送验证码 `
        //              // this.disabled = false//这里的this在定时器中 指向window
        //              btn.disabled = false
        //         }
        //     }, 1000)
        // })


        // -----------------------------------------
//  因此当我们只是想改变this 指向，并且不想调用这个函数的时候，可以使用bind，比如改变定时器内部的this指向.
 

        let btn = document.querySelector('input')
        btn.addEventListener('click', function () {
            this.disabled = true
            //开启定时器
            let i = 5
            btn.value = `重新发送${i} `
            let timer = setInterval(function () {
                i--
                btn.value = `重新发送${i} `
                if (i === 0) {
                    clearInterval(timer)
                    btn.value = `点击发送验证码 `
                    this.disabled = false //这里用this 下面就用bind()改变this指向  或者改成箭头函数
                }
            }.bind(btn), 1000)   //这里写this也行 因为在这里写的this指向btn
        })
        // 要是用的call会立即调用就会立即执行 定时器 不会隔1s
        // -------------------------------------------------------------------------
/*
        call apply bind总结
相同点:
    都可以改变函数内部的this指向.
区别点:
    call和apply 会调用函数,并且改变函数内部this指向.
    call和apply传递的参数不一样, call传递参数aru1, aru2..形式 apply必须数组形式[arg]
    bind 不会调用函数,可以改变函数内部this指向.
主要应用场景:
    call 调用函数并且可以传递参数
    apply经常跟数组有关系．比如借助于数学对象实现数组最大值最小值
    bind 不调用函数,但是还想改变this指向.比如改变定时器内部的this指向.
    
*/
    </script>

</body>

</html>